# 室内AGV配置检查清单

使用本清单确保您的AGV配置完整且正确。

---

## ✅ 系统环境检查

- [ ] ROS 2 Humble/Galactic 已安装
- [ ] Autoware.universe 已编译
- [ ] 工作空间已source (`source install/setup.bash`)
- [ ] 网络连接正常（如需远程控制）

---

## ✅ 硬件检查

### 传感器
- [ ] 激光雷达已连接
- [ ] 激光雷达驱动已配置
- [ ] 激光雷达话题正常发布 (`/sensing/lidar/points`)
- [ ] 激光雷达坐标变换已标定 (base_link → lidar_frame)
- [ ] IMU已连接（如使用）
- [ ] IMU驱动已配置（如使用）
- [ ] IMU话题正常发布（如使用）

### 车辆底盘
- [ ] 车辆CAN/串口通信正常
- [ ] 车辆驱动节点已启动
- [ ] 车辆状态话题正常发布 (`/vehicle/status/velocity_status`)
- [ ] 车辆控制接口已配置
- [ ] 紧急停止按钮功能正常

### 计算平台
- [ ] CPU性能满足要求（建议4核以上）
- [ ] 内存充足（建议8GB以上）
- [ ] 存储空间充足（建议50GB以上）

---

## ✅ 地图准备

### Lanelet2地图
- [ ] 地图文件存在 (`lanelet2_map.osm`)
- [ ] 地图覆盖完整运行区域
- [ ] 地图包含必要元素：
  - [ ] Lanelets（车道）
  - [ ] Areas（区域）
  - [ ] Stop lines（停止线，如需要）
- [ ] 地图速度限制已设置
- [ ] 地图验证通过（无错误）

### 点云地图
- [ ] 点云文件存在 (`pointcloud_map.pcd`)
- [ ] 点云格式正确（PCD格式）
- [ ] 点云密度适当（5-10cm间距）
- [ ] 点云覆盖完整区域
- [ ] 点云包含显著特征（墙壁、柱子等）
- [ ] 点云坐标系与Lanelet2一致

---

## ✅ 配置文件检查

### Launch文件
- [ ] `indoor_agv.launch.xml` 存在
- [ ] 地图路径参数正确
- [ ] 车辆模型参数正确
- [ ] 传感器模型参数正确

### Localization模块
- [ ] `ekf_localizer.param.yaml` 已配置
- [ ] `ndt_scan_matcher.param.yaml` 已配置
- [ ] `pose_initializer.param.yaml` 已配置
- [ ] NDT分辨率适合环境（0.3-0.5m）
- [ ] EKF频率设置合理（50-100Hz）

### Perception模块
- [ ] `occupancy_grid_map.param.yaml` 已配置
- [ ] `ground_segmentation.param.yaml` 已配置
- [ ] `euclidean_cluster.param.yaml` 已配置
- [ ] 栅格地图范围合理（30-50m）
- [ ] 栅格分辨率合理（0.1-0.2m）
- [ ] 高度过滤参数正确

### Planning模块
- [ ] `mission_planner.param.yaml` 已配置
- [ ] `behavior_path_planner.param.yaml` 已配置
- [ ] `behavior_velocity_planner.param.yaml` 已配置
- [ ] `motion_velocity_planner.param.yaml` 已配置
- [ ] `obstacle_cruise_planner.param.yaml` 已配置
- [ ] `velocity_smoother.param.yaml` 已配置
- [ ] 最大速度设置合理（0.8-2.0 m/s）
- [ ] 安全距离设置合理（0.3-0.5m）

### Control模块
- [ ] `trajectory_follower.param.yaml` 已配置
- [ ] `lateral_controller.param.yaml` 已配置
- [ ] `longitudinal_controller.param.yaml` 已配置
- [ ] `vehicle_cmd_gate.param.yaml` 已配置
- [ ] 控制频率设置合理（30-50Hz）
- [ ] PID参数已调试

### Map模块
- [ ] `lanelet2_map_loader.param.yaml` 已配置
- [ ] `pointcloud_map_loader.param.yaml` 已配置

### Vehicle模块
- [ ] `raw_vehicle_cmd_converter.param.yaml` 已配置
- [ ] 速度转换系数已标定
- [ ] 转向转换系数已标定

---

## ✅ 功能测试

### 定位功能
- [ ] 手动设置初始位姿后定位正常
- [ ] 定位精度满足要求（±10cm）
- [ ] 定位频率正常（30Hz以上）
- [ ] 定位无跳变和漂移
- [ ] 在整个运行区域内定位稳定

### 感知功能
- [ ] 能够检测静态障碍物
- [ ] 能够检测动态障碍物（如行人）
- [ ] 占据栅格地图正常生成
- [ ] 障碍物聚类正常
- [ ] 检测范围覆盖需求（10-15m）
- [ ] 误检率可接受

### 规划功能
- [ ] 能够规划全局路径
- [ ] 能够进行局部避障
- [ ] 路径平滑连续
- [ ] 速度规划合理
- [ ] 能够处理窄通道
- [ ] 能够处理动态障碍物

### 控制功能
- [ ] 能够跟踪直线路径
- [ ] 能够跟踪曲线路径
- [ ] 速度控制稳定
- [ ] 转向控制精确
- [ ] 停止位置准确（±20cm）
- [ ] 加减速平稳舒适

---

## ✅ 安全功能检查

### 紧急停止
- [ ] 紧急停止按钮功能正常
- [ ] 软件紧急停止功能正常
- [ ] 紧急停止后能够恢复

### 故障保护
- [ ] 定位丢失后能够安全停车
- [ ] 感知异常后能够安全停车
- [ ] 通信中断后能够安全停车
- [ ] 看门狗功能正常

### 碰撞避免
- [ ] 碰撞检测功能正常
- [ ] 碰撞预警功能正常
- [ ] 安全停止距离足够

---

## ✅ 性能检查

### 计算性能
- [ ] CPU占用率正常（<80%）
- [ ] 内存占用正常（<6GB）
- [ ] 无频繁的内存告警

### 实时性能
- [ ] 控制延迟可接受（<50ms）
- [ ] 规划延迟可接受（<100ms）
- [ ] 感知延迟可接受（<100ms）

### 稳定性
- [ ] 连续运行2小时无崩溃
- [ ] 多次启停正常
- [ ] 长时间待机后恢复正常

---

## ✅ 文档检查

- [ ] README.md 已阅读
- [ ] 配置快速参考.md 已阅读
- [ ] 关键参数已记录
- [ ] 调试方法已掌握

---

## ✅ 最终验证

### 基础功能验证
1. [ ] 启动系统无报错
2. [ ] 所有必要话题正常发布
3. [ ] TF树完整
4. [ ] RViz可视化正常

### 自动驾驶验证
1. [ ] 发送目标点后能够自动导航
2. [ ] 遇到障碍物能够避障或停车
3. [ ] 到达目标点后能够精确停车
4. [ ] 整个过程运行平稳

### 异常处理验证
1. [ ] 定位异常时能够安全停车
2. [ ] 路径被阻塞时能够重新规划
3. [ ] 紧急情况能够立即停车

---

## 📋 检查结果

**检查日期**: ___________

**检查人**: ___________

**检查结果**: 
- [ ] 全部通过，可以投入使用
- [ ] 部分通过，需要优化（列出问题项）
- [ ] 未通过，需要重新配置

**问题记录**:
```
问题1: 
解决方案:

问题2:
解决方案:

问题3:
解决方案:
```

**备注**:
```


```

---

## 📞 技术支持

如有任何问题，请参考：
1. [README.md](./README.md) - 完整文档
2. [配置快速参考.md](./配置快速参考.md) - 快速参考
3. 提交Issue获取帮助

---

**版本**: v1.0.0  
**更新日期**: 2025-10-21

