# å®¤å†…AGVé…ç½®å¿«é€Ÿå‚è€ƒæŒ‡å—

## ğŸš€ ä¸€é”®å¯åŠ¨

```bash
ros2 launch autoware_launch indoor_agv.launch.xml \
  map_path:=/path/to/map \
  vehicle_model:=your_agv \
  sensor_model:=your_sensor
```

---

## âš™ï¸ æ ¸å¿ƒå‚æ•°é€ŸæŸ¥è¡¨

### é€Ÿåº¦ç›¸å…³
| å‚æ•° | æ–‡ä»¶ | ä½ç½® | æ¨èå€¼ |
|------|------|------|--------|
| æœ€å¤§é€Ÿåº¦ | motion_velocity_planner.param.yaml | `max_velocity` | 0.8-2.0 m/s |
| æœ€å¤§åŠ é€Ÿåº¦ | motion_velocity_planner.param.yaml | `max_acceleration` | 0.3-0.5 m/sÂ² |
| æœ€å¤§å‡é€Ÿåº¦ | motion_velocity_planner.param.yaml | `max_deceleration` | 0.5-0.8 m/sÂ² |
| æœ€å¤§æ€¥åŠ¨åº¦ | velocity_smoother.param.yaml | `max_jerk` | 0.3-0.5 m/sÂ³ |

### å®šä½ç›¸å…³
| å‚æ•° | æ–‡ä»¶ | ä½ç½® | æ¨èå€¼ |
|------|------|------|--------|
| NDTåˆ†è¾¨ç‡ | ndt_scan_matcher.param.yaml | `resolution` | 0.3-0.5 m |
| NDTè¿­ä»£æ¬¡æ•° | ndt_scan_matcher.param.yaml | `max_iterations` | 20-50 |
| EKFé¢‘ç‡ | ekf_localizer.param.yaml | `predict_frequency` | 50-100 Hz |

### æ„ŸçŸ¥ç›¸å…³
| å‚æ•° | æ–‡ä»¶ | ä½ç½® | æ¨èå€¼ |
|------|------|------|--------|
| æ …æ ¼åœ°å›¾èŒƒå›´ | occupancy_grid_map.param.yaml | `map_length` | 30-50 m |
| æ …æ ¼åˆ†è¾¨ç‡ | occupancy_grid_map.param.yaml | `map_resolution` | 0.1-0.2 m |
| èšç±»è·ç¦» | euclidean_cluster.param.yaml | `cluster_tolerance` | 0.15-0.3 m |

### è§„åˆ’ç›¸å…³
| å‚æ•° | æ–‡ä»¶ | ä½ç½® | æ¨èå€¼ |
|------|------|------|--------|
| è§„åˆ’é¢‘ç‡ | behavior_path_planner.param.yaml | `planning_hz` | 10-20 Hz |
| é¿éšœè·ç¦» | behavior_path_planner.param.yaml | `lateral_avoidance_distance` | 0.3-0.5 m |
| åœæ­¢è·ç¦» | behavior_velocity_planner.param.yaml | `stop_distance` | 0.8-1.5 m |

### æ§åˆ¶ç›¸å…³
| å‚æ•° | æ–‡ä»¶ | ä½ç½® | æ¨èå€¼ |
|------|------|------|--------|
| æ§åˆ¶é¢‘ç‡ | trajectory_follower.param.yaml | `ctrl_period` | 0.02-0.03 s |
| å‰ç»è·ç¦» | lateral_controller.param.yaml | `base_lookahead_distance` | 1.5-2.5 m |
| PID-På¢ç›Š | longitudinal_controller.param.yaml | `kp` | 0.8-1.5 |
| PID-Iå¢ç›Š | longitudinal_controller.param.yaml | `ki` | 0.05-0.2 |
| PID-Då¢ç›Š | longitudinal_controller.param.yaml | `kd` | 0.03-0.1 |

---

## ğŸ”§ å¸¸è§è°ƒæ•´åœºæ™¯

### åœºæ™¯1ï¼šæé«˜/é™ä½è¿è¡Œé€Ÿåº¦
```yaml
# 1. motion_velocity_planner.param.yaml
max_velocity: 1.0  # æ”¹ä¸ºç›®æ ‡é€Ÿåº¦

# 2. behavior_velocity_planner.param.yaml
max_velocity: 1.0

# 3. vehicle_cmd_gate.param.yaml
velocity:
  max: 1.0
```

### åœºæ™¯2ï¼šå®šä½æŠ–åŠ¨
```yaml
# ndt_scan_matcher.param.yaml
resolution: 0.4  # å‡å°ï¼ˆåŸæ¥0.5ï¼‰
max_iterations: 40  # å¢åŠ ï¼ˆåŸæ¥30ï¼‰

# ekf_localizer.param.yaml
proc_stddev_yaw_c: 0.003  # å‡å°ï¼ˆåŸæ¥0.005ï¼‰
```

### åœºæ™¯3ï¼šé¿éšœä¸åŠæ—¶
```yaml
# behavior_velocity_planner.param.yaml
obstacle_stop:
  stop_distance: 1.5  # å¢åŠ ï¼ˆåŸæ¥1.0ï¼‰
  decel_distance: 5.0  # å¢åŠ ï¼ˆåŸæ¥3.0ï¼‰
```

### åœºæ™¯4ï¼šè½¬å¼¯è¿‡å†²
```yaml
# lateral_controller.param.yaml
base_lookahead_distance: 1.5  # å‡å°ï¼ˆåŸæ¥2.0ï¼‰
lateral_error_gain: 1.2  # å¢åŠ ï¼ˆåŸæ¥1.0ï¼‰
```

### åœºæ™¯5ï¼šé€Ÿåº¦ä¸ç¨³å®š
```yaml
# longitudinal_controller.param.yaml
kp: 0.8  # é™ä½ï¼ˆåŸæ¥1.0ï¼‰
kd: 0.1  # å¢åŠ ï¼ˆåŸæ¥0.05ï¼‰
velocity_smoothing_window: 7  # å¢åŠ ï¼ˆåŸæ¥5ï¼‰
```

### åœºæ™¯6ï¼šçª„é€šé“é€šè¡Œ
```yaml
# behavior_path_planner.param.yaml
lateral_avoidance_distance: 0.3  # å‡å°ï¼ˆåŸæ¥0.5ï¼‰
min_avoidance_gap: 0.6  # å‡å°ï¼ˆåŸæ¥0.8ï¼‰

# behavior_velocity_planner.param.yaml
corridor_width_speed_adjustment:
  enable: true
  min_corridor_width: 1.0
```

---

## ğŸ› æ•…éšœé€ŸæŸ¥

### é—®é¢˜ï¼šå®šä½ä¸åŠ¨
```bash
# æ£€æŸ¥æ¿€å…‰
ros2 topic hz /sensing/lidar/points  # åº”è¯¥10-20Hz

# æ£€æŸ¥åœ°å›¾
ros2 topic echo /map/pointcloud_map --once

# æ£€æŸ¥NDT
ros2 topic echo /localization/pose_estimator/ndt_scan_matcher/debug
```

### é—®é¢˜ï¼šæ£€æµ‹ä¸åˆ°éšœç¢ç‰©
```bash
# æ£€æŸ¥ç‚¹äº‘
ros2 topic echo /sensing/lidar/points --once

# æ£€æŸ¥æ„ŸçŸ¥è¾“å‡º
ros2 topic echo /perception/object_recognition/objects

# åœ¨RVizä¸­å¯è§†åŒ–
rviz2
```

### é—®é¢˜ï¼šè½¦è¾†ä¸åŠ¨
```bash
# æ£€æŸ¥engageçŠ¶æ€
ros2 topic echo /vehicle/engage

# æ‰‹åŠ¨engage
ros2 topic pub /vehicle/engage std_msgs/msg/Bool "{data: true}"

# æ£€æŸ¥æ§åˆ¶å‘½ä»¤
ros2 topic echo /control/command/control_cmd
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### é™ä½CPUå ç”¨
```yaml
# ndt_scan_matcher.param.yaml
max_iterations: 15  # å‡å°‘
resolution: 0.6  # å¢å¤§

# occupancy_grid_map.param.yaml
map_resolution: 0.2  # å¢å¤§

# behavior_path_planner.param.yaml
planning_hz: 5.0  # é™ä½
```

### æé«˜å®æ—¶æ€§
```yaml
# trajectory_follower.param.yaml
ctrl_period: 0.02  # å‡å°ï¼ˆæé«˜é¢‘ç‡ï¼‰

# behavior_path_planner.param.yaml
planning_hz: 15.0  # æé«˜

# ekf_localizer.param.yaml
predict_frequency: 100.0  # æé«˜
```

---

## ğŸ“ è°ƒè¯•å‘½ä»¤é›†

### æŸ¥çœ‹è¯é¢˜
```bash
# å®šä½
ros2 topic echo /localization/kinematic_state

# æ„ŸçŸ¥
ros2 topic echo /perception/object_recognition/objects

# è§„åˆ’
ros2 topic echo /planning/scenario_planning/trajectory

# æ§åˆ¶
ros2 topic echo /control/command/control_cmd
```

### æŸ¥çœ‹é¢‘ç‡
```bash
ros2 topic hz /localization/kinematic_state
ros2 topic hz /planning/scenario_planning/trajectory
ros2 topic hz /control/command/control_cmd
```

### æŸ¥çœ‹å‚æ•°
```bash
ros2 param list /localization/ekf_localizer
ros2 param get /control/trajectory_follower ctrl_period
```

### ä¸´æ—¶ä¿®æ”¹å‚æ•°
```bash
ros2 param set /control/trajectory_follower ctrl_period 0.02
ros2 param set /planning/behavior_path_planner planning_hz 15.0
```

### è®°å½•æ•°æ®
```bash
# è®°å½•å…³é”®è¯é¢˜
ros2 bag record \
  /localization/kinematic_state \
  /perception/object_recognition/objects \
  /planning/scenario_planning/trajectory \
  /control/command/control_cmd
```

---

## ğŸ¯ å…¸å‹é…ç½®æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šä»“åº“ç‰©æµï¼ˆé«˜é€Ÿï¼Œå¤§ç©ºé—´ï¼‰
- æœ€å¤§é€Ÿåº¦ï¼š1.5 m/s
- é¿éšœè·ç¦»ï¼š0.5 m
- åœæ­¢è·ç¦»ï¼š1.5 m
- æ …æ ¼åˆ†è¾¨ç‡ï¼š0.15 m

### æ–¹æ¡ˆBï¼šåŒ»é™¢é…é€ï¼ˆä½é€Ÿï¼Œé«˜å®‰å…¨ï¼‰
- æœ€å¤§é€Ÿåº¦ï¼š0.8 m/s
- é¿éšœè·ç¦»ï¼š0.8 m
- åœæ­¢è·ç¦»ï¼š2.0 m
- æ …æ ¼åˆ†è¾¨ç‡ï¼š0.1 m

### æ–¹æ¡ˆCï¼šå·¥å‚è½¦é—´ï¼ˆçª„é€šé“ï¼‰
- æœ€å¤§é€Ÿåº¦ï¼š1.0 m/s
- é¿éšœè·ç¦»ï¼š0.3 m
- æœ€å°é€šè¿‡é—´éš™ï¼š0.6 m
- å¯ç”¨é€šé“å®½åº¦é€Ÿåº¦è°ƒæ•´

### æ–¹æ¡ˆDï¼šé«˜ç²¾åº¦å¯¹æ¥
- ç›®æ ‡ç‚¹å®¹å·®ï¼š0.2 m
- NDTåˆ†è¾¨ç‡ï¼š0.3 m
- å‰ç»è·ç¦»ï¼š1.5 m
- PID-På¢ç›Šï¼š1.2

---

## ğŸ“ å¿«é€Ÿè”ç³»

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ [README.md](./README.md) è¯¦ç»†æ–‡æ¡£
2. æ£€æŸ¥ [å¸¸è§é—®é¢˜](#) ç« èŠ‚
3. æäº¤Issueæˆ–è”ç³»æŠ€æœ¯æ”¯æŒ

---

**æ›´æ–°æ—¶é—´**: 2025-10-21
**ç‰ˆæœ¬**: v1.0.0

