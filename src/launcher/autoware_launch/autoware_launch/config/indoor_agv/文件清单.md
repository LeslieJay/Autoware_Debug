# 室内AGV配置文件清单

本文档列出了室内AGV配置包中的所有文件及其用途。

---

## 📂 文件结构概览

```
indoor_agv/
├── launch/
│   └── indoor_agv.launch.xml                    # 主启动文件
│
├── config/indoor_agv/
│   ├── README.md                                # 📘 完整使用文档
│   ├── 配置快速参考.md                          # 🚀 快速参考指南
│   ├── 配置检查清单.md                          # ✅ 配置检查清单
│   ├── 文件清单.md                              # 📋 本文件
│   │
│   ├── localization/                            # 定位模块 (3个文件)
│   │   ├── ekf_localizer.param.yaml
│   │   ├── ndt_scan_matcher.param.yaml
│   │   └── pose_initializer.param.yaml
│   │
│   ├── perception/                              # 感知模块 (3个文件)
│   │   ├── occupancy_grid_map.param.yaml
│   │   ├── ground_segmentation.param.yaml
│   │   └── euclidean_cluster.param.yaml
│   │
│   ├── planning/                                # 规划模块 (6个文件)
│   │   ├── mission_planner.param.yaml
│   │   ├── behavior_path_planner.param.yaml
│   │   ├── behavior_velocity_planner.param.yaml
│   │   ├── motion_velocity_planner.param.yaml
│   │   ├── obstacle_cruise_planner.param.yaml
│   │   └── velocity_smoother.param.yaml
│   │
│   ├── control/                                 # 控制模块 (4个文件)
│   │   ├── trajectory_follower.param.yaml
│   │   ├── lateral_controller.param.yaml
│   │   ├── longitudinal_controller.param.yaml
│   │   └── vehicle_cmd_gate.param.yaml
│   │
│   ├── map/                                     # 地图模块 (2个文件)
│   │   ├── lanelet2_map_loader.param.yaml
│   │   └── pointcloud_map_loader.param.yaml
│   │
│   ├── vehicle/                                 # 车辆模块 (1个文件)
│   │   └── raw_vehicle_cmd_converter.param.yaml
│   │
│   └── system/                                  # 系统模块 (1个文件)
│       └── diagnostics.yaml
```

**统计**:
- 🗂️ 总文件数: 24个
- ⚙️ 配置文件: 20个 (.yaml)
- 📄 文档文件: 4个 (.md)
- 🚀 启动文件: 1个 (.xml)

---

## 📁 详细文件说明

### 🚀 启动文件

#### `launch/indoor_agv.launch.xml`
- **功能**: 室内AGV主启动文件
- **描述**: 启动所有必要的模块和节点
- **参数**: map_path, vehicle_model, sensor_model等
- **用途**: 一键启动整个系统

---

### 📘 文档文件

#### `README.md`
- **功能**: 完整使用文档
- **内容**: 
  - 概述和适用场景
  - 文件结构说明
  - 快速开始指南
  - 模块详细说明
  - 参数调优指南
  - 常见问题解答
  - 故障排查方法
- **页数**: 约40页
- **建议**: 首次使用前务必阅读

#### `配置快速参考.md`
- **功能**: 快速参考指南
- **内容**:
  - 核心参数速查表
  - 常见调整场景
  - 故障速查
  - 性能优化
  - 调试命令集
  - 典型配置方案
- **用途**: 日常使用时快速查找

#### `配置检查清单.md`
- **功能**: 系统配置检查清单
- **内容**:
  - 系统环境检查
  - 硬件检查
  - 地图准备
  - 配置文件检查
  - 功能测试
  - 安全功能检查
  - 性能检查
- **用途**: 部署前全面检查

#### `文件清单.md`
- **功能**: 文件清单和索引
- **内容**: 本文档
- **用途**: 了解文件结构和查找文件

---

### 🧭 Localization 定位模块

#### `localization/ekf_localizer.param.yaml`
- **节点**: ekf_localizer
- **功能**: 扩展卡尔曼滤波器，融合多传感器数据
- **关键参数**:
  - `predict_frequency: 50.0` - 预测频率
  - `enable_yaw_bias_estimation: true` - 偏航角偏差估计
- **调整场景**: 定位抖动、漂移

#### `localization/ndt_scan_matcher.param.yaml`
- **节点**: ndt_scan_matcher
- **功能**: NDT算法激光雷达定位
- **关键参数**:
  - `resolution: 0.5` - NDT体素分辨率
  - `max_iterations: 30` - 最大迭代次数
- **调整场景**: 定位精度、计算性能

#### `localization/pose_initializer.param.yaml`
- **节点**: pose_initializer
- **功能**: 车辆初始位姿设置
- **关键参数**:
  - `initialization_method: "rviz"` - 初始化方法
- **使用**: 启动时通过RViz设置初始位姿

---

### 👁️ Perception 感知模块

#### `perception/occupancy_grid_map.param.yaml`
- **节点**: occupancy_grid_map_node
- **功能**: 生成占据栅格地图
- **关键参数**:
  - `map_length: 50.0` - 地图范围
  - `map_resolution: 0.1` - 栅格分辨率
- **调整场景**: 检测范围、精度

#### `perception/ground_segmentation.param.yaml`
- **节点**: ground_segmentation_node
- **功能**: 地面和障碍物分离
- **关键参数**:
  - `algorithm_type: "ransac"` - 算法类型
  - `distance_threshold: 0.05` - 地面距离阈值
- **调整场景**: 地面误检、漏检

#### `perception/euclidean_cluster.param.yaml`
- **节点**: euclidean_cluster_node
- **功能**: 障碍物聚类
- **关键参数**:
  - `cluster_tolerance: 0.2` - 聚类距离
  - `min_cluster_size: 15` - 最小簇大小
- **调整场景**: 障碍物分割、噪声过滤

---

### 🗺️ Planning 规划模块

#### `planning/mission_planner.param.yaml`
- **节点**: mission_planner
- **功能**: 全局路径规划
- **关键参数**:
  - `algorithm: "a_star"` - 搜索算法
  - `goal_tolerance: 0.3` - 目标点容差
- **调整场景**: 路径质量、目标精度

#### `planning/behavior_path_planner.param.yaml`
- **节点**: behavior_path_planner
- **功能**: 局部路径规划和避障
- **关键参数**:
  - `planning_hz: 10.0` - 规划频率
  - `lateral_avoidance_distance: 0.5` - 避障距离
- **调整场景**: 避障效果、窄通道

#### `planning/behavior_velocity_planner.param.yaml`
- **节点**: behavior_velocity_planner
- **功能**: 基于场景的速度规划
- **关键参数**:
  - `max_velocity: 1.5` - 最大速度
  - `obstacle_stop.stop_distance: 1.0` - 停止距离
- **调整场景**: 安全距离、速度限制

#### `planning/motion_velocity_planner.param.yaml`
- **节点**: motion_velocity_planner
- **功能**: 轨迹级速度优化
- **关键参数**:
  - `max_acceleration: 0.5` - 最大加速度
  - `max_jerk: 0.5` - 最大急动度
- **调整场景**: 舒适性、动力学约束

#### `planning/obstacle_cruise_planner.param.yaml`
- **节点**: obstacle_cruise_planner
- **功能**: 动态障碍物跟随
- **关键参数**:
  - `strategy: "adaptive"` - 巡航策略
  - `time_headway: 1.5` - 时间车距
- **调整场景**: 跟车距离、动态避障

#### `planning/velocity_smoother.param.yaml`
- **节点**: velocity_smoother
- **功能**: 速度曲线平滑
- **关键参数**:
  - `smoother_type: "JerkFiltered"` - 平滑算法
  - `max_jerk: 0.5` - 急动度限制
- **调整场景**: 平滑度、舒适性

---

### 🎮 Control 控制模块

#### `control/trajectory_follower.param.yaml`
- **节点**: trajectory_follower
- **功能**: 轨迹跟踪主控制器
- **关键参数**:
  - `ctrl_period: 0.03` - 控制周期（33Hz）
  - `timeout_thr_sec: 0.5` - 超时阈值
- **调整场景**: 控制频率

#### `control/lateral_controller.param.yaml`
- **节点**: lateral_controller
- **功能**: 横向控制（转向）
- **关键参数**:
  - `controller_type: "pure_pursuit"` - 控制器类型
  - `base_lookahead_distance: 2.0` - 前瞻距离
- **调整场景**: 转向精度、过冲

#### `control/longitudinal_controller.param.yaml`
- **节点**: longitudinal_controller
- **功能**: 纵向控制（速度）
- **关键参数**:
  - `kp: 1.0` - PID比例增益
  - `ki: 0.1` - PID积分增益
  - `kd: 0.05` - PID微分增益
- **调整场景**: 速度跟踪、稳定性

#### `control/vehicle_cmd_gate.param.yaml`
- **节点**: vehicle_cmd_gate
- **功能**: 车辆命令安全门控
- **关键参数**:
  - `update_rate: 30.0` - 更新频率
  - `velocity.max: 1.5` - 速度限制
- **调整场景**: 安全限制、命令仲裁

---

### 🗺️ Map 地图模块

#### `map/lanelet2_map_loader.param.yaml`
- **节点**: lanelet2_map_loader
- **功能**: 加载Lanelet2路网地图
- **关键参数**:
  - `projection_type: "local"` - 投影类型
  - `default_speed_limit: 1.0` - 默认速度限制
- **调整场景**: 地图类型、速度限制

#### `map/pointcloud_map_loader.param.yaml`
- **节点**: pointcloud_map_loader
- **功能**: 加载点云地图
- **关键参数**:
  - `loading_mode: "whole"` - 加载模式
  - `enable_downsampling: false` - 是否降采样
- **调整场景**: 地图大小、加载方式

---

### 🚗 Vehicle 车辆模块

#### `vehicle/raw_vehicle_cmd_converter.param.yaml`
- **节点**: raw_vehicle_cmd_converter
- **功能**: 命令转换和标定
- **关键参数**:
  - `velocity_conversion.conversion_factor: 1.0` - 速度转换系数
  - `steering_conversion.steering_ratio: 15.0` - 转向比
- **调整场景**: 车辆标定

---

### 🔧 System 系统模块

#### `system/diagnostics.yaml`
- **功能**: 系统诊断配置
- **用途**: 监控各模块健康状态
- **内容**: 定义各模块的诊断聚合规则

---

## 📊 配置文件统计

### 按模块分类

| 模块 | 文件数 | 用途 |
|------|--------|------|
| Localization | 3 | 定位 |
| Perception | 3 | 感知 |
| Planning | 6 | 规划 |
| Control | 4 | 控制 |
| Map | 2 | 地图 |
| Vehicle | 1 | 车辆 |
| System | 1 | 系统 |
| **总计** | **20** | - |

### 按类型分类

| 类型 | 数量 | 说明 |
|------|------|------|
| YAML配置 | 20 | 节点参数配置 |
| Markdown文档 | 4 | 使用说明文档 |
| Launch文件 | 1 | 系统启动文件 |
| **总计** | **25** | - |

---

## 🔍 快速查找索引

### 按功能查找

**定位问题** → `localization/`
- 定位抖动: ekf_localizer.param.yaml
- 匹配失败: ndt_scan_matcher.param.yaml
- 初始化: pose_initializer.param.yaml

**感知问题** → `perception/`
- 检测不到: occupancy_grid_map.param.yaml
- 地面误检: ground_segmentation.param.yaml
- 聚类异常: euclidean_cluster.param.yaml

**规划问题** → `planning/`
- 无法规划: mission_planner.param.yaml
- 避障不当: behavior_path_planner.param.yaml
- 速度异常: behavior_velocity_planner.param.yaml
- 加速度大: motion_velocity_planner.param.yaml
- 跟车问题: obstacle_cruise_planner.param.yaml
- 不平滑: velocity_smoother.param.yaml

**控制问题** → `control/`
- 跟踪不上: trajectory_follower.param.yaml
- 转向问题: lateral_controller.param.yaml
- 速度问题: longitudinal_controller.param.yaml
- 命令异常: vehicle_cmd_gate.param.yaml

**地图问题** → `map/`
- 路网地图: lanelet2_map_loader.param.yaml
- 点云地图: pointcloud_map_loader.param.yaml

**车辆问题** → `vehicle/`
- 命令转换: raw_vehicle_cmd_converter.param.yaml

---

## 📚 使用建议

### 初次使用
1. 阅读 `README.md`（必读）
2. 使用 `配置检查清单.md` 检查系统
3. 参考 `配置快速参考.md` 进行基础配置
4. 启动系统测试

### 日常使用
1. 查阅 `配置快速参考.md` 快速查找参数
2. 参考典型配置方案
3. 使用调试命令排查问题

### 问题排查
1. 确定问题属于哪个模块
2. 查找对应配置文件
3. 参考 `README.md` 的故障排查章节
4. 调整相关参数并测试

---

## 🔄 配置文件更新日志

### v1.0.0 (2025-10-21)
- ✨ 初始版本
- 📦 20个配置文件
- 📘 4个文档文件
- 🚀 1个启动文件

---

## 📞 技术支持

**问题反馈**: 
- 查看 README.md 详细文档
- 使用配置检查清单自检
- 提交Issue描述问题

**配置帮助**:
- 参考配置快速参考
- 查看典型配置方案
- 联系技术支持

---

**版本**: v1.0.0  
**更新日期**: 2025-10-21  
**维护者**: 自动驾驶调试团队

